<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Studio Tattoo - Solicitar Or√ßamento</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" href="assets/images/favicon.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>

  <!-- Background com efeito parallax -->

  <div class="parallax-bg" id="parallax-bg1" style="background-image: url('assets/images/Fundo-Black.webp');"></div>
  <div class="parallax-bg" id="parallax-bg2" style="background-image: url('assets/images/Fundo-Black2.webp');"></div>
  <div class="parallax-bg" id="parallax-bg3" style="background-image: url('assets/images/Fundo-Black3.webp');"></div>
  <div class="parallax-bg" id="parallax-bg4" style="background-image: url('assets/images/Fundo-Black4.webp');"></div>

  <header>
    <div class="logo">
      <a href="or√ßamentoCliente.html">
        <img src="assets/images/logo.png" alt="Logo do Studio Tattoo" />
      </a>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="portfolio.html">Portf√≥lio</a></li>
        <li><a href="or√ßamentoCliente.html" class="active">Or√ßamento</a></li>
        <li><a href="avalia√ß√µes.html">Feedbacks</a></li>
        <li id="login-btn"><a href="#" class="open-btn" onclick="openLogin()">Login</a></li>
        <li id="perfil-btn" style="display:none;">
          <a href="#" class="open-btn" onclick="openPerfil()">Meu Perfil</a>
        </li>
        <li id="logout-btn" style="display:none;"><a href="#" onclick="logout()">Sair</a></li>
      </ul>
    </nav>

    <!-- MENU HAMBURGUER - Mobile -->

    <div class="menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>

  </header>

  <!-- FORMUL√ÅRIO PARA DESKTOP (Popup) -->
  <div class="container-principal desktop-form">
    <button class="close-btn">&times;</button>

    <div class="form-container">
      <span class="fundo-giratorio"></span>
      <span class="fundo-giratorio-secundario"></span>
      <!-- FORMUL√ÅRIO DE LOGIN -->
      <div class="formulario login">
        <h2 class="titulo animacao" style="--i:0; --j:21">Login</h2>

        <form onsubmit="return handleLogin(this)">
          <div class="campo-input animacao" style="--i:1; --j:22">
            <input type="email" name="email" required placeholder="Digite seu e-mail">
            <i class='bx bxs-user'></i>
          </div>

          <div class="campo-input animacao" style="--i:2; --j:23">
            <input type="password" name="senha" required class="password-input" placeholder="Digite sua senha">
            <span class="toggle-password">üëÅÔ∏è</span>
          </div>

          <!-- SPAN PARA MENSAGEM DE ERRO -->
          <div id="login-error-container" style="min-height: 20px; margin-top: 10px;"></div>

          <button type="submit" class="botao animacao" style="--i:3; --j:24">Login</button>

          <div class="texto-link animacao" style="--i:5; --j:25">
            <p>N√£o tem uma conta ainda? <a href="#" class="link-cadastro">Cadastrar-se</a></p>
          </div>
        </form>
      </div>
      <!-- INFORMA√á√ïES DO LOGIN -->
      <div class="info-texto login" style="color: white;">
        <h2 class="animacao" style="--i:0; --j:20">Seja Bem Vindo(a)!</h2>
        <p class="animacao" style="--i:1; --j:21">Aqui em nosso studio realizamos Tatto personalizadas</p>
      </div>

      <!-- FORMUL√ÅRIO DE CADASTRO -->
      <div class="formulario cadastro">
        <h2 class="titulo animacao" style="--i:17; --j:0">Cadastrar-se</h2>

        <form method="POST" action="../backend/php/cadastro.php">
          <div class="campo-input animacao" style="--i:18; --j:1">
            <input type="text" name="nome" required placeholder="Digite seu nome completo">
            <i class='bx bxs-user'></i>
          </div>

          <div class="campo-input animacao" style="--i:19; --j:2">
            <input type="email" name="email" required placeholder="Digite seu e-mail">
            <i class='bx bxs-envelope'></i>
          </div>

          <!-- CAMPO CPF -->
          <div class="campo-input animacao" style="--i:20; --j:3">
            <input type="text" name="cpf" required maxlength="14" class="cpf-input" placeholder="Digite seu CPF">
            <i class='bx bxs-id-card'></i>
          </div>

          <div class="campo-input animacao" style="--i:21; --j:4">
            <input type="password" name="senha" required class="password-input" placeholder="Crie uma senha">
            <span class="toggle-password">üëÅÔ∏è</span>
          </div>

          <div class="campo-input animacao" style="--i:22; --j:5">
            <input type="password" name="confirmar_senha" required class="password-input"
              placeholder="Confirme sua senha">
            <span class="toggle-password">üëÅÔ∏è</span>
          </div>

          <button type="submit" class="botao animacao" style="--i:23;--j:6">Cadastrar-se</button>
        </form>
      </div>

      <!-- INFORMA√á√ïES DO CADASTRO -->
      <div class="info-texto cadastro" style="color: white;">
        <h2 class="animacao" style="--i:17; --j:0;">CADASTRO!</h2>
        <p class="animacao" style="--i:18; --j:1;">Transforme suas ideias em arte! Fa√ßa seu cadastro, solicite
          seu or√ßamento e d√™ o primeiro passo para realizar a tatuagem dos seus sonhos. Sua hist√≥ria,
          eternizada na pele üñ§üé®
        </p> <br><br><br>

        <div class="texto-link animacao" style="--i:22; --j:5">
          <p>J√° tem uma conta? <a href="#" class="link-login">Login</a></p>
        </div>
      </div>
    </div>
  </div>

  <!-- FORMUL√ÅRIO PARA MOBILE (P√°gina completa) -->
  <div class="mobile-form-page" id="mobileFormPage">
    <div class="mobile-form-container">
      <header class="mobile-form-header">
        <button class="mobile-back-btn" onclick="closeMobileForm()">
          <i class='bx bx-arrow-back'></i>
          Voltar
        </button>
        <h2>Login & Cadastro</h2>
      </header>

      <div class="mobile-form-content">
        <!-- FORMUL√ÅRIO DE LOGIN MOBILE -->
        <div class="mobile-form-section active" id="mobileLoginSection">
          <h3>Login</h3>
          <form onsubmit="return handleLogin(this)">
            <div class="mobile-input-group">
              <input type="email" name="email" required placeholder="Digite seu e-mail">
              <i class='bx bxs-envelope'></i>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="senha" required class="password-input" placeholder="Digite sua senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>

            <!-- SPAN PARA MENSAGEM DE ERRO MOBILE -->
            <div id="mobile-login-error-container" style="min-height: 20px; margin-top: 10px;"></div>

            <button type="submit" class="mobile-btn primary">Entrar</button>
            <div class="mobile-form-link">
              <p>N√£o tem conta? <a href="#" onclick="showMobileSection('cadastro')">Cadastre-se</a></p>
            </div>
          </form>
        </div>

        <!-- FORMUL√ÅRIO DE CADASTRO MOBILE -->
        <div class="mobile-form-section" id="mobileCadastroSection">
          <h3>Cadastrar-se</h3>
          <form method="POST" action="../backend/php/cadastro.php">
            <div class="mobile-input-group">
              <input type="text" name="nome" required placeholder="Digite seu nome completo">
              <i class='bx bxs-user'></i>
            </div>
            <div class="mobile-input-group">
              <input type="email" name="email" required placeholder="Digite seu e-mail">
              <i class='bx bxs-envelope'></i>
            </div>
            <div class="mobile-input-group">
              <input type="text" name="cpf" required maxlength="14" class="cpf-input" placeholder="Digite seu CPF">
              <i class='bx bxs-id-card'></i>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="senha" required class="password-input" placeholder="Crie uma senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="confirmar_senha" required class="password-input"
                placeholder="Confirme sua senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>
            <button type="submit" class="mobile-btn primary">Cadastrar</button>
            <div class="mobile-form-link">
              <p>J√° tem conta? <a href="#" onclick="showMobileSection('login')">Fazer login</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- FORMUL√ÅRIO PARA MOBILE (P√°gina completa) -->
  <div class="mobile-form-page" id="mobileFormPage">
    <div class="mobile-form-container">
      <header class="mobile-form-header">
        <button class="mobile-back-btn" onclick="closeMobileForm()">
          <i class='bx bx-arrow-back'></i>
          Voltar
        </button>
        <h2>Login & Cadastro</h2>
      </header>

      <div class="mobile-form-content">
        <!-- FORMUL√ÅRIO DE LOGIN MOBILE -->
        <div class="mobile-form-section active" id="mobileLoginSection">
          <h3>Login</h3>
          <form onsubmit="return handleLogin(this)">
            <div class="mobile-input-group">
              <input type="email" name="email" required placeholder="Digite seu e-mail">
              <i class='bx bxs-envelope'></i>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="senha" required class="password-input" placeholder="Digite sua senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>

            <!-- SPAN PARA MENSAGEM DE ERRO MOBILE -->
            <div id="mobile-login-error-container" style="min-height: 20px; margin-top: 10px;"></div>

            <button type="submit" class="mobile-btn primary">Entrar</button>
            <div class="mobile-form-link">
              <p>N√£o tem conta? <a href="#" onclick="showMobileSection('cadastro')">Cadastre-se</a></p>
            </div>
          </form>
        </div>

        <!-- FORMUL√ÅRIO DE CADASTRO MOBILE -->
        <div class="mobile-form-section" id="mobileCadastroSection">
          <h3>Cadastrar-se</h3>
          <form method="POST" action="../backend/php/cadastro.php">
            <div class="mobile-input-group">
              <input type="text" name="nome" required placeholder="Digite seu nome completo">
              <i class='bx bxs-user'></i>
            </div>
            <div class="mobile-input-group">
              <input type="email" name="email" required placeholder="Digite seu e-mail">
              <i class='bx bxs-envelope'></i>
            </div>
            <div class="mobile-input-group">
              <input type="text" name="cpf" required maxlength="14" class="cpf-input" placeholder="Digite seu CPF">
              <i class='bx bxs-id-card'></i>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="senha" required class="password-input" placeholder="Crie uma senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>
            <div class="mobile-input-group">
              <input type="password" name="confirmar_senha" required class="password-input"
                placeholder="Confirme sua senha">
              <span class="toggle-password">üëÅÔ∏è</span>
            </div>
            <button type="submit" class="mobile-btn primary">Cadastrar</button>
            <div class="mobile-form-link">
              <p>J√° tem conta? <a href="#" onclick="showMobileSection('login')">Fazer login</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <main>
    <section class="orcamento-hero">
      <div class="hero-content">
        <h1>Solicite seu <br>Or√ßamento</h1>
        <p>Preencha o formul√°rio abaixo para receber uma proposta personalizada</p>
      </div>
    </section>

    <section id="formulario-orcamento">
      <div class="orcamento-container">
        <div id="login-message" class="login-message" style="display: none;">
          <span>‚úã Aten√ß√£o!</span>
          <p>Para enviar seu or√ßamento, voc√™ precisa <a href="#" onclick="openLogin()" class="highlight-link">fazer
              login</a> ou <a href="#" class="highlight-link" onclick="openLogin()">criar uma conta</a>.</p>
          <p>Assim que fizer login, o formul√°rio ser√° liberado para preenchimento.</p>
        </div>

        <!-- FORMULARIO DE OR√áAMENTO - FUNCIONAL APENAS QUANDO OO USU√ÅRIO REALIZAR LOGIN NO SISTEMA -->
        <form id="form-orcamento" style="display: none;" action="https://formspree.io/f/xblolggl" method="POST"
          enctype="multipart/form-data">
          <h2>Informa√ß√µes para Or√ßamento</h2>

          <div class="form-group">
            <label for="nome-cliente">Nome Completo*</label>
            <input type="text" id="nome-cliente" name="name" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email-cliente">E-mail*</label>
              <input type="email" id="email-cliente" name="_replyto" required>
            </div>
            <div class="form-group">
              <label for="telefone-cliente">Telefone*</label>
              <input type="tel" id="telefone-cliente" name="telephone" required>
            </div>
          </div>

          <div class="form-group">
            <label for="estilo-tatuagem">Estilo da Tatuagem*</label>
            <select id="estilo-tatuagem" name="tattoo_style" required>
              <option value="" disabled selected>Selecione o estilo...</option>
              <option value="aquarela">Aquarela</option>
              <option value="realista">Realista</option>
              <option value="tradicional">Tradicional</option>
              <option value="minimalista">Minimalista</option>
              <option value="geometrica">Geom√©trica</option>
              <option value="japonesa">Japonesa (Irezumi)</option>
              <option value="blackwork">Blackwork</option>
              <option value="outro">Outro (envie uma imagem de refer√™ncia)</option>
            </select>
          </div>

          <!-- CAMPO DE UPLOAD SEMPRE VIS√çVEL (OBRIGAT√ìRIO APENAS SE "OUTRO" FOR SELECIONADO) -->

          <div class="form-group">
            <label for="imagem-referencia">Imagem de refer√™ncia <span id="required-star"
                style="display:none; color:red;">*</span></label>
            <input type="file" id="imagem-referencia" name="upload" accept="image/*">
            <small>Envie uma imagem que ilustre o estilo desejado (opcional, exceto se selecionou
              "Outro")</small>
          </div>

          <div class="form-group">
            <label for="descricao-tatuagem">Descreva sua ideia com detalhes*</label>
            <textarea id="descricao-tatuagem" name="message" rows="5" required
              placeholder="Fale sobre o que voc√™ deseja tatuar, tamanho aproximado, local do corpo, cores preferidas, elementos importantes, significado, etc."></textarea>
          </div>

          <button type="submit" class="btn-enviar">Enviar Solicita√ß√£o</button>
        </form>

        <script>
          // Tornar o upload obrigat√≥rio apenas se "Outro" for selecionado

          document.getElementById('estilo-tatuagem').addEventListener('change', function () {
            const fileInput = document.getElementById('imagem-referencia');
            const requiredStar = document.getElementById('required-star');

            if (this.value === 'outro') {
              requiredStar.style.display = 'inline';
              fileInput.setAttribute('required', 'true');
            } else {
              requiredStar.style.display = 'none';
              fileInput.removeAttribute('required');
            }
          });
        </script>


      </div>
    </section>

    <section id="info-orcamento">
      <div class="info-container">
        <h2>Como funciona nosso processo</h2>
        <div class="info-cards">
          <div class="info-card">
            <div class="info-icon">1</div>
            <h3>Solicita√ß√£o</h3>
            <p> Fa√ßa seu LOGIN ou CADASTRAR-SE ap√≥s Preencha o formul√°rio com detalhes sobre sua ideia de
              tatuagem.</p>
          </div>
          <div class="info-card">
            <div class="info-icon">2</div>
            <h3>An√°lise</h3>
            <p>Nossa equipe avalia sua proposta e entra em contato em at√© 48h.</p>
          </div>
          <div class="info-card">
            <div class="info-icon">3</div>
            <h3>Or√ßamento</h3>
            <p>Enviaremos uma proposta detalhada com valor e prazo estimado.</p>
          </div>
          <div class="info-card">
            <div class="info-icon">4</div>
            <h3>Agendamento</h3>
            <p>Ap√≥s aprova√ß√£o, marcamos sua sess√£o com pagamento de sinal.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal de Perfil -->

  <div id="perfilModal" class="modal-perfil">
    <div class="perfil-container">
      <div class="perfil-header">
        <h2>Meu Perfil</h2>
        <button class="close-perfil" onclick="closePerfil()">√ó</button>
      </div>

      <div class="perfil-content">
        <!-- Menu Principal do Perfil -->
        <div id="perfilMenu" class="perfil-section active">
          <div class="perfil-info">
            <div class="avatar">üë§</div>
            <h3 id="perfilUserName">Usu√°rio</h3>
            <p id="perfilUserEmail">carregando...</p>
          </div>

          <div class="perfil-options">
            <button class="perfil-btn" onclick="showPerfilSection('email')">
              üìß Atualizar E-mail
            </button>
            <button class="perfil-btn" onclick="showPerfilSection('senha')">
              üîí Alterar Senha
            </button>
            <button class="perfil-btn danger" onclick="confirmarExclusao()">
              üóëÔ∏è Deletar Conta
            </button>
            <button class="perfil-btn secondary" onclick="closePerfil()">
              ‚Ü©Ô∏è Voltar
            </button>
          </div>
        </div>

        <!-- Se√ß√£o Atualizar E-mail -->
        <div id="perfilEmail" class="perfil-section">
          <h3>Atualizar E-mail</h3>
          <form id="formAtualizarEmail" class="perfil-form" method="POST"
            action="../backend/php/atualizar_email_processa.php">
            <div class="campo-input">
              <input type="email" name="novo_email" id="novoEmail" required placeholder="Digite o novo e-mail">
            </div>
            <div class="campo-input">
              <input type="email" name="confirmar_email" id="confirmarEmail" required
                placeholder="Confirme o novo e-mail">
              <span class="erro-email" style="display: none; color: #ff6b6b; font-size: 12px;"></span>
            </div>
            <div class="campo-input">
              <input type="password" name="senha_atual" required placeholder="Digite sua senha atual">
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn-confirmar">‚úÖ Confirmar Altera√ß√£o</button>
              <button type="button" class="btn-voltar" onclick="showPerfilSection('menu')">‚Ü©Ô∏è Voltar</button>
            </div>
          </form>
        </div>

        <!-- Se√ß√£o Alterar Senha -->
        <div id="perfilSenha" class="perfil-section">
          <h3>Alterar Senha</h3>
          <form id="formAlterarSenha" class="perfil-form" method="POST"
            action="../backend/php/atualizar_senha_processa.php">
            <div class="campo-input">
              <input type="password" name="senha_atual" required placeholder="Digite sua senha atual">
            </div>
            <div class="campo-input">
              <input type="password" name="nova_senha" id="novaSenha" required minlength="6"
                placeholder="Digite a nova senha">
              <span class="toggle-password" onclick="togglePassword('novaSenha')">üëÅÔ∏è</span>
            </div>
            <div class="campo-input">
              <input type="password" name="confirmar_senha" id="confirmarSenha" required
                placeholder="Confirme a nova senha">
              <span class="toggle-password" onclick="togglePassword('confirmarSenha')">üëÅÔ∏è</span>
              <span class="erro-senha" style="display: none; color: #ff6b6b; font-size: 12px;"></span>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn-confirmar">‚úÖ Alterar Senha</button>
              <button type="button" class="btn-voltar" onclick="showPerfilSection('menu')">‚Ü©Ô∏è Voltar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Confirma√ß√£o de Exclus√£o -->
  <div id="confirmModal" class="modal-confirm">
    <div class="confirm-container">
      <h3>üóëÔ∏è Confirmar Exclus√£o</h3>
      <p><strong>Aten√ß√£o!</strong> Tem certeza que deseja deletar sua conta?</p>
      <p style="color: #ff6b6b; font-size: 14px; margin-top: 10px;">
        ‚ö†Ô∏è Esta a√ß√£o √© irrevers√≠vel e voc√™ ser√° automaticamente deslogado!
      </p>
      <div class="confirm-buttons">
        <button class="btn-danger" onclick="deletarConta()">‚úÖ Sim, Deletar Conta</button>
        <button class="btn-voltar" onclick="fecharConfirmacao()">‚ùå Cancelar</button>
      </div>
    </div>
  </div>
  <!-- ALERTA DE SUCESSO -->

  <div class="alert-overlay" id="alertOverlay">
    <div class="alert-modal success-alert">
      <div class="alert-icon">
        <i class='bx bxs-check-circle'></i>
      </div>
      <h3>Sucesso!</h3>
      <p id="alertMessage">Suas altera√ß√µes foram salvas com sucesso.</p>
      <button class="btn-primary" onclick="fecharAlerta()">OK</button>
    </div>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Hor√°rio de Funcionamento</h3>
        <p>Segunda a Sexta: 10h - 20h</p>
        <p>S√°bado: 10h - 18h</p>
        <p>Domingo: Fechado</p>
      </div>
      <div class="footer-section">
        <h3>Contato</h3>
        <p>Email: contato@studiotattoo.com</p>
        <p>Telefone: (11) 98765-4321</p>
        <div class="contato-opcoes">
          <a href="https://web.whatsapp.com/" target="_blank">
            <img src="assets/images/whatsapp-icon.png" alt="WhatsApp do est√∫dio" />
          </a>
          <a href="https://www.instagram.com" target="_blank">
            <img src="assets/images/instagram-icon.png" alt="Instagram do est√∫dio" />
          </a>
        </div>
      </div>
      <div class="footer-section">
        <h3>Localiza√ß√£o</h3>
        <p>Bairro da Liberdade</p>
        <p>Rua Galv√£o Bueno, 312</p>
        <p>S√£o Paulo - SP</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Studio Tattoo. Todos os direitos reservados.</p>
      <p class="developer-credit">
        Desenvolvido por
        <a href="https://yleonardodev.github.io/MEUS-LINKS/#" target="_blank" class="developer-link">
          LC Developer
        </a>
      </p>
    </div>
  </footer>

  <script src="assets/js/script.js"></script>

  <script>

    // Se o Usu√°rio estiver logado, mostrar o formul√°rio de or√ßamento caso contr√°rio, mostrar a mensagem para fazer login

    // Se o Usu√°rio estiver logado, mostrar o formul√°rio de or√ßamento habilitado
    // Caso contr√°rio, mostrar o formul√°rio desabilitado com a mensagem de login

    document.addEventListener('DOMContentLoaded', function () {
      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      const formOrcamento = document.getElementById('form-orcamento');
      const loginMessage = document.getElementById('login-message');
      const formInputs = formOrcamento.querySelectorAll('input, select, textarea, button');

      // Sempre mostrar o formul√°rio
      formOrcamento.style.display = 'block';

      if (isLoggedIn) {
        // Habilitar formul√°rio se logado
        loginMessage.style.display = 'none';
        formInputs.forEach(input => {
          input.disabled = false;
        });
        document.getElementById('login-btn').style.display = 'none';
        document.getElementById('logout-btn').style.display = 'block';
      } else {
        // Desabilitar formul√°rio se n√£o logado
        loginMessage.style.display = 'block';
        formInputs.forEach(input => {
          input.disabled = true;
        });
      }
    });
  </script>
</body>

</html>